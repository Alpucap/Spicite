<style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative&display=swap');

    .review-container {
        margin-bottom: 20px;
        margin-top: 20px;
        max-width: 500px; /* Mengatur lebar maksimum kontainer */
        display: flex;
        flex-direction: column;
        border-radius: 50px; /* Melengkungkan sudut-sudut kontainer */
        align-items: center; /* Posisikan kontainer secara horizontal di tengah */
        margin-left: auto; 
        margin-right: auto; 
    }

    .review-container h3{
        color:#8fae51;
        font-family: 'Cinzel Decorative', serif;
    }

    .stars {
        display: flex;
    }

    .star {
        font-size: 36px; /* Memperbesar ukuran bintang */
        cursor: pointer;
        margin-right: 5px; /* Menambahkan sedikit ruang antara bintang */
    }
    textarea{
        background-color: #ebeeec;
        border-radius: 5px;
    }
    .star:last-child {
        margin-right: 0; /* Menghapus margin kanan pada bintang terakhir */
    }

    .star.selected {
        color: gold;
    }

    .rating-input {
        display: none;
    }

    .review-text {
        width: 100%;
        height: 100px;
        margin-top: 10px;
        resize: vertical;
    }

    .submit-review {
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #8fae51;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .submit-review:hover {
        background-color: rgb(58, 130, 61);
    }
</style>

<div class="review-container">
    <h3>PLEASE LEAVE US A REVIEW</h3>
    <div class="stars">
        <span class="star" data-rating="1">★</span>
        <span class="star" data-rating="2">★</span>
        <span class="star" data-rating="3">★</span>
        <span class="star" data-rating="4">★</span>
        <span class="star" data-rating="5">★</span>
    </div>
    <input type="hidden" class="rating-input">
    <textarea class="review-text" placeholder="Write your review here..."></textarea>
    <button class="submit-review">Submit Review</button>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const reviewContainers = document.querySelectorAll('.review-container');

        reviewContainers.forEach(container => {
            const stars = container.querySelectorAll('.star');

            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.rating);
                    const parentContainer = this.closest('.review-container');

                    stars.forEach(s => {
                        if (parseInt(s.dataset.rating) <= rating) {
                            s.classList.add('selected');
                        } else {
                            s.classList.remove('selected');
                        }
                    });

                    const ratingInput = parentContainer.querySelector('.rating-input');
                    ratingInput.value = rating;
                });
            });

            const submitButton = container.querySelector('.submit-review');

            submitButton.addEventListener('click', function() {
                const parentContainer = this.closest('.review-container');
                const rating = parseInt(parentContainer.querySelector('.rating-input').value);
                const reviewText = parentContainer.querySelector('.review-text').value;

                const reviewData = {
                    rating: rating,
                    reviewText: reviewText
                };

                fetch('/submit-review', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(reviewData)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to submit review');
                    }
                    console.log('Review submitted successfully');
                    parentContainer.querySelector('.rating-input').value = '';
                    parentContainer.querySelector('.review-text').value = '';
                    stars.forEach(star => {
                        star.classList.remove('selected');
                    });
                })
                .catch(error => {
                    console.error('Error submitting review:', error.message);
                });
            });
        });
    });
</script>